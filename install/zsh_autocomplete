#compdef cpgo
compdef _cpgo cpgo

_cpgo() {
    local -a opts
    local cur
    cur=${words[-1]}

    # Define possible options for cpgo
    opts=(
        '--source:-s:Source file:_files'  # Completes file paths for --source or -s
        '--destination:-d:Destination file:_files'  # Completes file paths for --destination or -d
        '--width:-w:Specify width (e.g. 100):_values "width" 50 75 100 150'  # Suggests width values
        '--help:Show help message'
    )

    # File path completion for source and destination
    if [[ "$cur" == --source=* || "$cur" == -s=* ]]; then
        _files
        return
    elif [[ "$cur" == --destination=* || "$cur" == -d=* ]]; then
        _files
        return
    fi

    # Use the Zsh _describe helper to provide autocompletion suggestions
    _describe 'values' opts
}

# Don't run the completion function when being source-ed or eval-ed
if [ "$funcstack[1]" = "_cpgo" ]; then
    _cpgo
fi
